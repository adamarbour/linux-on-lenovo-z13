# Installation Instructions (Chimera)
This covers the baseline instructions for installing the operating system on my laptop following my personal preferences:
* LUKS full drive encryption + unlock with fido
* UKI on _esp_ partition
* Hibernation support

__Assumption:__ You are booted into the machine and you're online. I am connected via usb-c to ethernet dongle.

# Partition & Bootstrap
```bash
### PARTITION SCHEME
##  - 300MiB    vfat                /efi
##  - 100%FREE  luks  cryptroot
##    |-        lvm   vg1
##    |---      lv    vg1-TP--root  /
##    |---      lv    vg1-TP--swap  -swap-

# Make sure we have all the required tools and they are up to date
apk add cryptsetup-scripts lvm2 dosfstools xfsprogs

# Set the device variable ... for me this is nvme0n1
DEVICE=/dev/<DEVICE>
DEFI=$DEVICEn1p1
DROOT=$DEVICEn1p2

# Wipe the partition table and format the disk to the scheme above
wipefs -a $DEVICE
fdisk $DEVICE

# Setup the encrypted root
cryptsetup luksFormat $DROOT
cryptsetup config $DROOT --label CRYPTROOT
cryptsetup luksOpen /dev/disk/by-label/CRYPTROOT cryptroot

# Setup the volume group
vgcreate vg1 /dev/mapper/cryptroot
lvcreate -L 32GB -n TP-swap vg1
lvcreate -l 100%FREE -n TP-root vg1

# Setup the swap
mkswap -L SWAP /dev/mapper/vg1-TP--swap
swapon -L SWAP

# Create the partitions
mkfs.vfat -n EFI -F32 $DEFI
mkfs.xfs -L ROOTFS /dev/mapper/vg1-TP--root -f

# Mount them to their appropriate locations
mount -m -L ROOTFS /mnt
chmod 755 /mnt
mkdir -p /mnt/efi
mount -m -L EFI /mnt/efi

# Bootstrap
chimera-bootstrap /mnt
```
